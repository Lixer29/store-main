{"ast":null,"code":"import React,{Fragment,useContext,useEffect,useState}from'react';import{Button,Card,Col,Container,ListGroup,Row,Image,Pagination}from\"react-bootstrap\";import{Context}from\"../index\";import DeviceItem from\"../components/DeviceItem\";import{observer}from\"mobx-react-lite\";import{getAllBrands,getAllDevices,getAllTypes}from\"../http/deviceApi\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ShopPage=observer(()=>{const{device}=useContext(Context);const location=useLocation();useEffect(()=>{getAllTypes().then(data=>device.setTypes(data));getAllBrands().then(data=>device.setBrands(data));getAllDevices(null,null,device.page,device.limit).then(data=>{console.log(data);device.setDevices(data.rows);device.setTotalCount(data.count);});},[]);useEffect(()=>{getAllDevices(device.selectedType.id,device.selectedBrand.id,device.page,device.limit).then(data=>{device.setDevices(data.rows);device.setTotalCount(data.count);});},[device.page,device.selectedType,device.selectedBrand,location]);const pageCount=Math.ceil(device.totalCount/device.limit);const pages=[];for(let i=0;i<pageCount;i++){pages.push(i+1);}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(ListGroup,{className:\"border-success\",style:{cursor:'pointer'},children:device.types.map(types=>/*#__PURE__*/_jsx(ListGroup.Item,{onClick:()=>device.setSelectedType(types),style:{borderWidth:'2px',background:types.id===device.selectedType.id?'green':'',color:types.id===device.selectedType.id?'white':'',border:types.id===device.selectedType.id?'black':''},className:\"border-black\",active:types.id===device.selectedType.id,children:types.name}))})}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-row gap-2\",style:{cursor:'pointer'},children:device.brands.map(brand=>/*#__PURE__*/_jsx(Card,{onClick:()=>device.setSelectedBrand(brand),style:{borderWidth:'2px',borderRadius:'20px',backgroundColor:brand.id===device.selectedBrand.id?'green':'',color:brand.id===device.selectedBrand.id?'white':'green',border:brand.id===device.selectedBrand.id?'none':''},className:\"border-success\",children:/*#__PURE__*/_jsx(Card.Body,{children:brand.name})},brand.id))}),/*#__PURE__*/_jsx(Row,{className:\"d-flex\",children:device.devices.map(device=>/*#__PURE__*/_jsx(DeviceItem,{device:device},device.id))}),/*#__PURE__*/_jsxs(Pagination,{className:\"mt-5\",style:{color:'green'},children:[/*#__PURE__*/_jsx(Pagination.Prev,{onClick:()=>device.setPage(device.page-1),disabled:device.page===1}),pages.map(page=>/*#__PURE__*/_jsx(Pagination.Item,{active:device.page===page,onClick:()=>device.setPage(page),className:\"text-success\",style:{color:'green !important'},children:page},page)),/*#__PURE__*/_jsx(Pagination.Next,{onClick:()=>device.setPage(device.page+1),disabled:device.page===pageCount})]}),/*#__PURE__*/_jsx(Fragment,{})]})]})});});export default ShopPage;","map":{"version":3,"names":["React","Fragment","useContext","useEffect","useState","Button","Card","Col","Container","ListGroup","Row","Image","Pagination","Context","DeviceItem","observer","getAllBrands","getAllDevices","getAllTypes","useLocation","jsx","_jsx","jsxs","_jsxs","ShopPage","device","location","then","data","setTypes","setBrands","page","limit","console","log","setDevices","rows","setTotalCount","count","selectedType","id","selectedBrand","pageCount","Math","ceil","totalCount","pages","i","push","children","className","md","style","cursor","types","map","Item","onClick","setSelectedType","borderWidth","background","color","border","active","name","brands","brand","setSelectedBrand","borderRadius","backgroundColor","Body","devices","Prev","setPage","disabled","Next"],"sources":["D:/web/online-store-frontEnd/src/pages/ShopPage.js"],"sourcesContent":["import React, {Fragment, useContext, useEffect, useState} from 'react';\r\nimport {Button, Card, Col, Container, ListGroup, Row, Image, Pagination} from \"react-bootstrap\";\r\nimport {Context} from \"../index\";\r\nimport DeviceItem from \"../components/DeviceItem\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {getAllBrands, getAllDevices, getAllTypes} from \"../http/deviceApi\";\r\nimport {useLocation} from \"react-router-dom\";\r\n\r\nconst ShopPage = observer (() => {\r\n    const {device} = useContext(Context)\r\n\r\n    const location = useLocation()\r\n\r\n    useEffect(() => {\r\n        getAllTypes().then(data => device.setTypes(data))\r\n        getAllBrands().then(data => device.setBrands(data))\r\n        getAllDevices(null, null, device.page, device.limit).then(data => {\r\n            console.log(data)\r\n            device.setDevices(data.rows)\r\n            device.setTotalCount(data.count)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        getAllDevices(device.selectedType.id, device.selectedBrand.id, device.page, device.limit).then(data => {\r\n            device.setDevices(data.rows)\r\n            device.setTotalCount(data.count)\r\n        })\r\n    }, [device.page, device.selectedType, device.selectedBrand, location])\r\n\r\n\r\n    const pageCount = Math.ceil(device.totalCount / device.limit)\r\n    const pages = []\r\n\r\n    for (let i = 0; i < pageCount; i++) {\r\n        pages.push(i + 1)\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Row className=\"mt-4\" >\r\n                <Col md={3}>\r\n                    <ListGroup className=\"border-success\" style={{cursor: 'pointer'}}>\r\n                        {device.types.map((types) => (\r\n                            <ListGroup.Item\r\n                                onClick={() => device.setSelectedType(types)}\r\n                                style={{\r\n                                    borderWidth: '2px',\r\n                                    background: types.id === device.selectedType.id ? 'green' : '',\r\n                                    color: types.id === device.selectedType.id ? 'white' : '',\r\n                                    border: types.id === device.selectedType.id ? 'black' : '',\r\n                                }}\r\n                                className=\"border-black\"\r\n                                active={types.id === device.selectedType.id}\r\n\r\n                            >{types.name}</ListGroup.Item>\r\n                        ))}\r\n\r\n                    </ListGroup>\r\n                </Col>\r\n                <Col md={9}>\r\n                    <div className=\"d-flex flex-row gap-2\" style={{cursor: 'pointer'}}>\r\n                        {device.brands.map((brand) => (\r\n                            <Card\r\n                                onClick={() => device.setSelectedBrand(brand)}\r\n                                style={{\r\n                                    borderWidth: '2px',\r\n                                    borderRadius: '20px',\r\n                                    backgroundColor: brand.id === device.selectedBrand.id ? 'green' : '',\r\n                                    color: brand.id === device.selectedBrand.id ? 'white' : 'green',\r\n                                    border: brand.id === device.selectedBrand.id ? 'none' : '',\r\n                                }}\r\n                                className=\"border-success\"\r\n                                key={brand.id}\r\n                            >\r\n                                <Card.Body>{brand.name}</Card.Body>\r\n                            </Card>\r\n\r\n                        ))}\r\n                    </div>\r\n\r\n                    <Row className=\"d-flex\">\r\n                        {device.devices.map(device =>\r\n                            <DeviceItem key={device.id} device={device}/>\r\n                        )}\r\n                    </Row>\r\n                    <Pagination className=\"mt-5\" style={{color: 'green'}}>\r\n                        <Pagination.Prev onClick={() => device.setPage(device.page - 1)} disabled={device.page === 1} />\r\n                        {pages.map(page => (\r\n                            <Pagination.Item\r\n                                key={page}\r\n                                active={device.page === page}\r\n                                onClick={() => device.setPage(page)}\r\n                                className=\"text-success\"\r\n                                style={{color: 'green !important'}}\r\n                            >\r\n                                {page}\r\n                            </Pagination.Item>\r\n                        ))}\r\n                        <Pagination.Next onClick={() => device.setPage(device.page + 1)} disabled={device.page === pageCount} />\r\n                    </Pagination>\r\n                    <Fragment></Fragment>\r\n                </Col>\r\n\r\n            </Row>\r\n        </Container>\r\n    );\r\n});\r\n\r\nexport default ShopPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}