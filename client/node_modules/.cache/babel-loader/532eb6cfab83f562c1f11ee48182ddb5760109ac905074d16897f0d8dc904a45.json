{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{jwtDecode}from\"jwt-decode\";import{getAll,getOne}from\"../http/basketApi\";import{Context}from\"../index\";import DeviceItem,{DeviceItemPlaceholder}from\"../components/DeviceItem\";import{Container,Row,Spinner}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";const BasketPage=()=>{const[loading,setLoading]=useState(true);const token=localStorage.getItem('token');const decode=jwtDecode(token);const basketId=decode.id;const{device}=useContext(Context);const checkBasket=()=>{getAll(basketId).then(data=>{device.setBasketDevices(data);console.log(data);}).catch(e=>console.log(e.message)).finally(()=>setLoading(false));};useEffect(()=>{checkBasket();},[device.basketDevices]);if(loading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(DeviceItemPlaceholder,{})});}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{className:\"d-flex\",children:device.basketDevices?device.basketDevices.map(device=>/*#__PURE__*/_jsx(DeviceItem,{device:device},device.id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-white\",children:\"No devices in the basket.\"})})});};export default BasketPage;","map":{"version":3,"names":["React","useContext","useEffect","useState","jwtDecode","getAll","getOne","Context","DeviceItem","DeviceItemPlaceholder","Container","Row","Spinner","jsx","_jsx","BasketPage","loading","setLoading","token","localStorage","getItem","decode","basketId","id","device","checkBasket","then","data","setBasketDevices","console","log","catch","e","message","finally","basketDevices","children","className","map"],"sources":["D:/web/own-online-store/client/src/pages/BasketPage.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {jwtDecode} from \"jwt-decode\";\r\nimport {getAll, getOne} from \"../http/basketApi\";\r\nimport {Context} from \"../index\";\r\nimport DeviceItem, {DeviceItemPlaceholder} from \"../components/DeviceItem\";\r\nimport {Container, Row, Spinner} from \"react-bootstrap\";\r\n\r\nconst BasketPage = () => {\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const token = localStorage.getItem('token')\r\n    const decode = jwtDecode(token)\r\n    const basketId = decode.id\r\n\r\n    const {device} = useContext(Context)\r\n\r\n    const checkBasket = () => {\r\n        getAll(basketId).then(data => {\r\n            device.setBasketDevices(data)\r\n            console.log(data)\r\n        }).catch(e => console.log(e.message))\r\n            .finally(() => setLoading(false))\r\n    }\r\n    useEffect(() => {\r\n        checkBasket()\r\n    }, [device.basketDevices]);\r\n\r\n    if(loading) {\r\n        return (\r\n            <Container>\r\n                <DeviceItemPlaceholder/>\r\n            </Container>\r\n        )\r\n    }\r\n    return (\r\n        <Container>\r\n            <Row className=\"d-flex\">\r\n                {device.basketDevices? (\r\n                    device.basketDevices.map((device) => (\r\n                        <DeviceItem key={device.id} device={device} />\r\n                    ))\r\n                ) : (\r\n                    <p className=\"text-white\">No devices in the basket.</p>\r\n                )}\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default BasketPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAC5D,OAAQC,SAAS,KAAO,YAAY,CACpC,OAAQC,MAAM,CAAEC,MAAM,KAAO,mBAAmB,CAChD,OAAQC,OAAO,KAAO,UAAU,CAChC,MAAO,CAAAC,UAAU,EAAGC,qBAAqB,KAAO,0BAA0B,CAC1E,OAAQC,SAAS,CAAEC,GAAG,CAAEC,OAAO,KAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAE5C,KAAM,CAAAe,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,MAAM,CAAGjB,SAAS,CAACc,KAAK,CAAC,CAC/B,KAAM,CAAAI,QAAQ,CAAGD,MAAM,CAACE,EAAE,CAE1B,KAAM,CAACC,MAAM,CAAC,CAAGvB,UAAU,CAACM,OAAO,CAAC,CAEpC,KAAM,CAAAkB,WAAW,CAAGA,CAAA,GAAM,CACtBpB,MAAM,CAACiB,QAAQ,CAAC,CAACI,IAAI,CAACC,IAAI,EAAI,CAC1BH,MAAM,CAACI,gBAAgB,CAACD,IAAI,CAAC,CAC7BE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACrB,CAAC,CAAC,CAACI,KAAK,CAACC,CAAC,EAAIH,OAAO,CAACC,GAAG,CAACE,CAAC,CAACC,OAAO,CAAC,CAAC,CAChCC,OAAO,CAAC,IAAMjB,UAAU,CAAC,KAAK,CAAC,CAAC,CACzC,CAAC,CACDf,SAAS,CAAC,IAAM,CACZuB,WAAW,CAAC,CAAC,CACjB,CAAC,CAAE,CAACD,MAAM,CAACW,aAAa,CAAC,CAAC,CAE1B,GAAGnB,OAAO,CAAE,CACR,mBACIF,IAAA,CAACJ,SAAS,EAAA0B,QAAA,cACNtB,IAAA,CAACL,qBAAqB,GAAC,CAAC,CACjB,CAAC,CAEpB,CACA,mBACIK,IAAA,CAACJ,SAAS,EAAA0B,QAAA,cACNtB,IAAA,CAACH,GAAG,EAAC0B,SAAS,CAAC,QAAQ,CAAAD,QAAA,CAClBZ,MAAM,CAACW,aAAa,CACjBX,MAAM,CAACW,aAAa,CAACG,GAAG,CAAEd,MAAM,eAC5BV,IAAA,CAACN,UAAU,EAAiBgB,MAAM,CAAEA,MAAO,EAA1BA,MAAM,CAACD,EAAqB,CAChD,CAAC,cAEFT,IAAA,MAAGuB,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,2BAAyB,CAAG,CACzD,CACA,CAAC,CACC,CAAC,CAEpB,CAAC,CAED,cAAe,CAAArB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}