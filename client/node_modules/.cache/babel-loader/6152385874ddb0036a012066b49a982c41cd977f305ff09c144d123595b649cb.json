{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{Alert,Button,Card,Col,Container,Image,Row}from\"react-bootstrap\";import{useParams}from\"react-router-dom\";import bigStar from\"../assets/Star 1.png\";import{getOneDevices}from\"../http/deviceApi\";import{jwtDecode}from\"jwt-decode\";import{addBasket,deleteBasket,getOne}from\"../http/basketApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DevicePage=()=>{const[device,setDevice]=useState({info:[]});const[isAdded,setIsAdded]=useState(false);const[show,setShow]=useState(false);const[content,setContent]=useState(false);const{id}=useParams();const token=localStorage.getItem('token');const decode=jwtDecode(token);const basketId=decode.id;const checkBasket=()=>{getOne(id,basketId).then(bool=>setIsAdded(bool)).catch(e=>console.log(e.message));};const createBasketDevice=()=>{addBasket(id,{basketId}).then(data=>{setShow(true);setContent(data.message);setTimeout(()=>setShow(false),5000);}).catch(e=>console.log('add',e.message));};const deleteBasketDevice=()=>{deleteBasket(id,{basketId}).then(data=>{setShow(true);setContent(data.message);setTimeout(()=>setShow(false),5000);}).catch(e=>console.log('add',e.message));};useEffect(()=>{getOneDevices(id).then(data=>setDevice(data)).catch(data=>console.log(data));checkBasket();},[deleteBasketDevice]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mt-5\",children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Image,{width:300,height:300,src:process.env.REACT_APP_API_URL+device.img})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"d-flex justify-content-center text-white\",children:device.name}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center\",style:{background:\"url(\".concat(bigStar,\") no-repeat center center\"),width:210,height:200,backgroundSize:'cover',fontSize:64},children:device.rating})]})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsxs(Card,{style:{height:'300px',background:'rgba(255, 255, 255, 0.9)',borderWidth:'2px'},className:\"border-success d-flex justify-content-between px-5 py-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"d-flex justify-content-center\",children:[\"\\u0432\\u0456\\u0434\",device.price,\"\\u0433\\u0440\\u043D.\"]}),isAdded?/*#__PURE__*/_jsx(Button,{onClick:deleteBasketDevice,children:\"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0437 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0438\"}):/*#__PURE__*/_jsx(Button,{onClick:createBasketDevice,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u0438 \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]}),/*#__PURE__*/_jsx(Alert,{className:\"mt-3 position-absolute\",style:{opacity:'0.7',textAlign:'center',padding:'8px 20px'},show:show,variant:\"success\",children:/*#__PURE__*/_jsx(Alert.Heading,{children:content})})]})]}),/*#__PURE__*/_jsxs(Row,{className:\"d-flex flex-column m-3 gap-1\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4 text-white\",children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"}),device.info.length>0?device.info.map((info,index)=>/*#__PURE__*/_jsxs(Row,{style:{background:index%2===0?'lightgray':'',color:index%2===0?'':'white',padding:'10px',borderRadius:'10px'},children:[info.title,\": \",info.description]},info.id)):/*#__PURE__*/_jsx(\"div\",{className:\"text-white pt-4\",style:{fontSize:'20px'},children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A \\u043D\\u0435\\u043C\\u0430\\u0454\"})]})]});};export default DevicePage;","map":{"version":3,"names":["React","useContext","useEffect","useState","Alert","Button","Card","Col","Container","Image","Row","useParams","bigStar","getOneDevices","jwtDecode","addBasket","deleteBasket","getOne","jsx","_jsx","jsxs","_jsxs","DevicePage","device","setDevice","info","isAdded","setIsAdded","show","setShow","content","setContent","id","token","localStorage","getItem","decode","basketId","checkBasket","then","bool","catch","e","console","log","message","createBasketDevice","data","setTimeout","deleteBasketDevice","children","className","md","width","height","src","process","env","REACT_APP_API_URL","img","name","style","background","concat","backgroundSize","fontSize","rating","borderWidth","price","onClick","opacity","textAlign","padding","variant","Heading","length","map","index","color","borderRadius","title","description"],"sources":["D:/web/own-online-store/client/src/pages/DevicePage.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {Alert, Button, Card, Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport bigStar from \"../assets/Star 1.png\"\r\nimport {getOneDevices} from \"../http/deviceApi\";\r\nimport {jwtDecode} from \"jwt-decode\";\r\nimport {addBasket, deleteBasket, getOne} from \"../http/basketApi\";\r\nconst DevicePage = () => {\r\n    const [device, setDevice] = useState({info: []})\r\n    const [isAdded, setIsAdded] = useState(false)\r\n    const [show, setShow] = useState(false);\r\n    const [content, setContent] = useState(false);\r\n\r\n    const {id} = useParams()\r\n    const token = localStorage.getItem('token')\r\n    const decode = jwtDecode(token)\r\n    const basketId = decode.id\r\n\r\n\r\n    const checkBasket = () => {\r\n        getOne(id, basketId).then(bool => setIsAdded(bool)).catch(e => console.log(e.message))\r\n    }\r\n    const createBasketDevice = () => {\r\n        addBasket(id, {basketId}).then(data => {\r\n            setShow(true)\r\n            setContent(data.message)\r\n            setTimeout(() => setShow(false), 5000);\r\n        }).catch(e => console.log('add', e.message))\r\n    }\r\n    const deleteBasketDevice = () => {\r\n        deleteBasket(id, {basketId}).then(data => {\r\n            setShow(true)\r\n            setContent(data.message)\r\n            setTimeout(() => setShow(false), 5000);\r\n        }).catch(e => console.log('add', e.message))\r\n    }\r\n\r\n    useEffect(() => {\r\n        getOneDevices(id)\r\n            .then(data => setDevice(data))\r\n            .catch(data => console.log(data))\r\n        checkBasket()\r\n    }, [deleteBasketDevice]);\r\n\r\n    return (\r\n        <Container>\r\n\r\n            <Row  className=\"mt-5\">\r\n                <Col md={4}>\r\n                    <Image width={300} height={300} src={process.env.REACT_APP_API_URL + device.img}/>\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Row className=\"d-flex justify-content-center\">\r\n                        <h2 className=\"d-flex justify-content-center text-white\">{device.name}</h2>\r\n                        <div\r\n                            className=\"d-flex align-items-center justify-content-center\"\r\n                            style={{background: `url(${bigStar}) no-repeat center center`, width:210, height: 200, backgroundSize: 'cover', fontSize:64}}\r\n                        >\r\n                            {device.rating}\r\n                        </div>\r\n                    </Row>\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card style={{ height: '300px', background: 'rgba(255, 255, 255, 0.9)', borderWidth: '2px'}} className=\"border-success d-flex justify-content-between px-5 py-4\">\r\n                        <h3 className=\"d-flex justify-content-center\">від\r\n                            {device.price}\r\n                            грн.</h3>\r\n                        {isAdded ?\r\n                            <Button onClick={deleteBasketDevice}>\r\n                            Видалити з корзини\r\n                            </Button>\r\n                            :\r\n                            <Button onClick={createBasketDevice}>\r\n                            Добавити в корзину\r\n                            </Button>\r\n                        }\r\n\r\n                    </Card>\r\n                    <Alert className=\"mt-3 position-absolute\" style={{opacity: '0.7', textAlign: 'center', padding: '8px 20px'}} show={show} variant=\"success\">\r\n                        <Alert.Heading>{content}</Alert.Heading>\r\n                    </Alert>\r\n                </Col>\r\n            </Row>\r\n            <Row className=\"d-flex flex-column m-3 gap-1\">\r\n                <h1 className=\"my-4 text-white\">Характеристики</h1>\r\n                {device.info.length > 0 ? (\r\n                    device.info.map((info, index) => (\r\n                        <Row\r\n                            key={info.id}\r\n                            style={{\r\n                                background: index % 2 === 0 ? 'lightgray' : '',\r\n                                color: index % 2 === 0 ? '' : 'white',\r\n                                padding: '10px',\r\n                                borderRadius: '10px'\r\n                            }}\r\n                        >\r\n                            {info.title}: {info.description}\r\n                        </Row>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"text-white pt-4\" style={{fontSize: '20px'}} >Характеристик немає</div>\r\n                )}\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default DevicePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}