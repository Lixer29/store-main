{"ast":null,"code":"import React,{useContext,useState}from'react';import{Button,Card,Container,Form,NavLink,Row}from\"react-bootstrap\";import{useLocation,useNavigate}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHOP_ROUTE}from\"../utils\";import{Context}from\"../index\";import{check,login,registration}from\"../http/userApi\";import{observer}from\"mobx-react-lite\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AuthPage=observer(()=>{const{user}=useContext(Context);const location=useLocation();const history=useNavigate();const isLogin=location.pathname===LOGIN_ROUTE;const[password,setPassword]=useState('');const[email,setEmail]=useState('');const[error,setError]=useState('');const click=async()=>{try{let data;if(isLogin){data=await login(email,password);}else{data=await registration(email,password);}user.setIsAuth(true);user.setUser(user);history(SHOP_ROUTE);}catch(e){setError(e.response.data.message.message);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center\",style:{height:window.innerHeight-54},children:/*#__PURE__*/_jsxs(Card,{style:{width:600},className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-auto\",children:isLogin?'Авторизация':\"Регистрация\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\",value:email,onChange:e=>setEmail(e.target.value),type:\"email\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"mt-3\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",value:password,onChange:e=>setPassword(e.target.value),type:\"password\",onKeyPress:e=>{if(e.key==='Enter'){click();}}}),error?/*#__PURE__*/_jsx(\"div\",{className:\"text-danger\",children:error}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between mt-4 flex flex-row \",children:[isLogin?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row d-flex gap-1 \",children:[\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\",/*#__PURE__*/_jsx(NavLink,{className:\"text-success\",to:REGISTRATION_ROUTE,onClick:()=>history(REGISTRATION_ROUTE),children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0441\\u044F!\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row d-flex gap-1 \",children:[\"\\u0404 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442?\",/*#__PURE__*/_jsx(NavLink,{className:\"text-success\",to:LOGIN_ROUTE,onClick:()=>history(LOGIN_ROUTE),children:\"\\u0423\\u0432\\u0456\\u0439\\u0434\\u0438\"})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline-success\",className:\" align-self-end\",onClick:()=>click(),children:isLogin?'Войти':'Регистрация'})]})]})]})})});});export default AuthPage;","map":{"version":3,"names":["React","useContext","useState","Button","Card","Container","Form","NavLink","Row","useLocation","useNavigate","LOGIN_ROUTE","REGISTRATION_ROUTE","SHOP_ROUTE","Context","check","login","registration","observer","jsx","_jsx","jsxs","_jsxs","AuthPage","user","location","history","isLogin","pathname","password","setPassword","email","setEmail","error","setError","click","data","setIsAuth","setUser","e","response","message","children","className","style","height","window","innerHeight","width","Control","placeholder","value","onChange","target","type","onKeyPress","key","to","onClick","variant"],"sources":["D:/web/own-online-store/client/src/pages/AuthPage.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Button, Card, Container, Form, NavLink, Row} from \"react-bootstrap\";\r\nimport {useLocation, useNavigate} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE} from \"../utils\";\r\nimport {Context} from \"../index\";\r\nimport {check, login, registration} from \"../http/userApi\";\r\nimport {observer} from \"mobx-react-lite\";\r\nconst AuthPage = observer(() => {\r\n    const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const history = useNavigate()\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const [password, setPassword] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [error, setError] = useState('')\r\n\r\n\r\n    const click = async () => {\r\n        try {\r\n            let data;\r\n            if (isLogin) {\r\n                data = await login(email, password)\r\n            } else {\r\n                data = await registration(email, password)\r\n            }\r\n            user.setIsAuth(true)\r\n            user.setUser(user)\r\n            history(SHOP_ROUTE)\r\n        } catch (e) {\r\n            setError(e.response.data.message.message)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Container\r\n                className=\"d-flex justify-content-center align-items-center\"\r\n                style={{height: window.innerHeight - 54}}\r\n            >\r\n                <Card style={{width: 600}} className=\"p-5\">\r\n                    <h2 className=\"m-auto\">{isLogin ? 'Авторизация' : \"Регистрация\"}</h2>\r\n                    <Form className=\"d-flex flex-column\">\r\n                        <Form.Control\r\n                            className=\"mt-3\"\r\n                            placeholder=\"Введите ваш email...\"\r\n                            value={email}\r\n                            onChange={e => setEmail(e.target.value)}\r\n                            type=\"email\"\r\n                        />\r\n                        <Form.Control\r\n                            className=\"mt-3\"\r\n                            placeholder=\"Введите ваш пароль...\"\r\n                            value={password}\r\n                            onChange={e => setPassword(e.target.value)}\r\n                            type=\"password\"\r\n                            onKeyPress={e => {\r\n                                if (e.key === 'Enter') {\r\n                                    click();\r\n                                }\r\n                            }}\r\n                        />\r\n                        {error ?\r\n                            <div className=\"text-danger\">\r\n                                {error}\r\n                            </div>\r\n                            :\r\n                            <div></div>\r\n                        }\r\n                        <div className=\"d-flex justify-content-between mt-4 flex flex-row \">\r\n                            {isLogin ?\r\n                                <div className=\"flex flex-row d-flex gap-1 \">\r\n                                    Немає аккаунта?\r\n                                    <NavLink className=\"text-success\" to={REGISTRATION_ROUTE} onClick={() => history(REGISTRATION_ROUTE)}\r\n                                    >Зарегистрируйся!\r\n                                    </NavLink>\r\n                                </div>\r\n                                :\r\n                                <div className=\"flex flex-row d-flex gap-1 \">\r\n                                    Є аккаунт?<NavLink className=\"text-success\" to={LOGIN_ROUTE} onClick={() => history(LOGIN_ROUTE)}>\r\n                                    Увійди\r\n                                </NavLink>\r\n\r\n                                </div>\r\n                            }\r\n                            <Button\r\n                                variant={\"outline-success\"}\r\n                                className=\" align-self-end\"\r\n                                onClick={() => click()}\r\n                            >\r\n                                {isLogin ? 'Войти' : 'Регистрация'}\r\n                            </Button>\r\n                        </div>\r\n\r\n                    </Form>\r\n                </Card>\r\n            </Container>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default AuthPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}